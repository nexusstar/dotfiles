# tmux.conf by Nexus Star (nexus.star@gmail.com)

# keybindings.
set -g prefix ^A
bind a send-prefix

set -g history-limit 50000
set -g default-terminal "screen-256color"
setw -g clock-mode-style 24
set -g base-index 1

bind o choose-session
bind N command-prompt -p "new-session:" "new-session -AD -s %%"

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind -r H resize-pane -L 1
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 1

bind -r M-h swap-window -t :-
bind -r M-j swap-pane -D
bind -r M-k swap-pane -U
bind -r M-l swap-window -t :+

setw -g mode-keys vi

bind ^C copy-mode
bind p paste-buffer
bind P choose-buffer # Remember, does automatic paste
bind ^P list-buffers

set  -g set-titles on
set  -g set-titles-string '#S@#H'
set  -g renumber-windows on
setw -g window-status-format '#I:#W#F'

bind ^A last-window

# reload config file
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

bind w choose-window
bind u next -a
bind g move-window # Reset window position

bind -r Space next-window
bind -r BSpace previous-window

bind ^I command-prompt -p "move-to-idx:" "move-window -t %%"
bind v command-prompt -p "swap-with:" "swap-window -t %%"

# Use the wonderful fzf to get fuzzy finding going
bind e split-window -p 30 tselect-exec
bind q split-window -p 30 tselect-window
bind ^Q split-window -p 30 tselect-window
bind Q split-window -p 30 tselect-session
bind ^S split-window -p 30 tselect-sshmux
bind ^M split-window -p 30 tselect-man

bind ^H neww "htop"

#split windows vertical with 's' and horizontal with 'z'
bind s split-window -h -c '#{pane_current_path}'
bind z split-window -v -c '#{pane_current_path}'

bind b break-pane
bind B command-prompt -p "join-pane <win>.<pane>" "join-pane -t %1"
bind n next-layout
bind x resize-pane -Z

bind y setw synchronize-panes on
bind Y setw synchronize-panes off

bind M-w kill-window
bind M-p kill-pane
bind ^D detach

set  -g status-interval 1
set  -g status-justify left
setw -g monitor-activity off
set  -g visual-activity on
set  -g display-time 1500
set  -g repeat-time 500
bind ^L show-messages

setw -g clock-mode-colour colour135
setw -g mode-attr bold
setw -g mode-fg colour196
setw -g mode-bg colour238

# pane border
set  -g pane-border-bg colour235
set  -g pane-border-fg colour241
set  -g pane-active-border-bg colour236
set  -g pane-active-border-fg colour196

set  -g status-position bottom
set  -g status-bg colour234
set  -g status-fg colour137
set  -g status-attr dim
set  -g status-left '#[fg=colour232,bg=colour108,bold] #S #[bg=colour234] '
set  -g status-right '#[fg=colour124] #(cat /tmp/gtd)#[fg=colour255,bg=colour239,bold] %d/%m │ %H:%M │ #[fg=colour114]#(uptime | cut -f 4-5 -d " " | cut -f 1 -d ",") '
set  -g status-right-length 50
set  -g status-left-length 50

setw -g window-status-current-fg colour116
setw -g window-status-current-bg colour240
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour116]#F '

setw -g window-status-fg colour138
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F'

setw -g window-status-bell-attr bold
setw -g window-status-bell-fg colour255
setw -g window-status-bell-bg colour1

set  -g message-attr bold
set  -g message-fg colour232
set  -g message-bg colour166

# Source existing
bind ^R source-file ~/.tmux.conf
bind F1 source-file ~/.tmux/remote.conf

# smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# start timer with 25 work 5 rest interval
bind -n M-t run "(~/dotfiles/gtd/./gtd -t 25 5)"
